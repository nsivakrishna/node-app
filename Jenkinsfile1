pipeline {
    agent any 
    environment {
        DOCKER_TAG = getDockerTag() 
    }
    stages {
        stage('Build Docker Image') {
            steps{
                sh "sudo su -"
                sh "docker build . -t kammana/nodeapp "
            }
        } 
    }
}

def getDockerTag(){
        def tag = sh script: 'git rev-parse HEAD', retirnStdout: true
        return tag

}
